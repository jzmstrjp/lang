generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Problem {
  id                String            @id @default(cuid())
  type              ProblemType
  english           String
  japaneseReply     String
  options           Json
  correctIndex      Int
  audioEnUrl        String?
  audioJaUrl        String?
  compositeImageUrl String?
  sceneId           String
  scenePrompt       String
  speakersSceneA    String
  speakersSceneB    String
  nuance            String?
  genre             String?
  patternGroup      String?
  wordCount         Int
  interactionIntent InteractionIntent
  isCached          Boolean           @default(false)
  qualityCheck      Boolean           @default(false)
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  initial_alphabet  String

  @@unique([english, interactionIntent, sceneId])
  @@index([type, initial_alphabet])
  @@index([type, isCached, qualityCheck])
  @@index([sceneId])
  @@map("problems")
}

enum ProblemType {
  short
  medium
  long
}

enum InteractionIntent {
  request
  question
  proposal
  opinion
  agreement
  info
}
